<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TEVÄ°TOL â€¢ Cumhuriyet Balosu 2025</title>
  <meta name="description" content="Animasyonlu dijital davetiye" />
  <meta name="theme-color" content="#8e0000" />
  <style>
    :root{ --bg:#8e0000; --bg2:#5d0000; --paper:#f6f2e9; --text:#f6f2e9; }
    *{ box-sizing:border-box }
    html,body{ height:100%; margin:0; font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial; color:var(--text);
      background: radial-gradient(1200px 1200px at 10% 10%, var(--bg), var(--bg2)); }
    .wrap{ min-height:100%; display:grid; place-items:center; padding:24px; gap:14px }
    .card{ width:min(820px,96vw); aspect-ratio:3/4; position:relative; perspective:1200px }
    /* zarf */
    .envelope{ position:absolute; inset:0; display:grid; place-items:center; border-radius:24px;
      background: linear-gradient(145deg,#b10505,#7a0000); box-shadow:0 20px 50px rgba(0,0,0,.35); overflow:hidden;
      transition: transform .8s cubic-bezier(.2,.7,.2,1), opacity .6s ease; }
    .envelope:before{ content:""; position:absolute; inset:0; opacity:.35; pointer-events:none;
      background:
        linear-gradient(to bottom right, transparent 49.5%, rgba(0,0,0,.15) 50%) top left/50% 50% no-repeat,
        linear-gradient(to bottom left, transparent 49.5%, rgba(0,0,0,.15) 50%) top right/50% 50% no-repeat,
        linear-gradient(to top right, transparent 49.5%, rgba(0,0,0,.15) 50%) bottom left/50% 50% no-repeat,
        linear-gradient(to top left, transparent 49.5%, rgba(0,0,0,.15) 50%) bottom right/50% 50% no-repeat; }
    .seal{ position:absolute; width:120px; height:120px; border-radius:50%;
      background: radial-gradient(circle at 30% 30%, #ffd3a1, #ffb56b 40%, #d68444 70%, #a25b27);
      box-shadow:0 6px 0 rgba(0,0,0,.25), inset 0 4px 10px rgba(0,0,0,.25);
      display:grid; place-items:center; }
    .hint{ position:absolute; bottom:18px; left:0; right:0; text-align:center; font-size:14px; opacity:.9 }
    /* davetiye (kaÄŸÄ±t) */
    .paper{ position:absolute; inset:0; border-radius:22px; background:var(--paper); box-shadow:0 20px 50px rgba(0,0,0,.35);
      transform: rotateX(14deg) translateY(20px) scale(.98); transform-origin:50% 100%; overflow:hidden; opacity:0;
      transition: transform .9s cubic-bezier(.2,.8,.2,1), opacity .6s ease; }
    .paper img{ width:100%; height:100%; object-fit:cover; display:block }
    /* open state */
    .open .envelope{ transform: translateY(30px) rotateX(-18deg) scale(.96); opacity:0; pointer-events:none }
    .open .paper{ transform: rotateX(0) translateY(0) scale(1); opacity:1 }
    .actions{ display:flex; gap:10px; flex-wrap:wrap; justify-content:center }
    button{ background:#f6f2e9; color:#7a0000; border:0; border-radius:999px; padding:10px 16px; font-weight:700; cursor:pointer }
    .footer{ text-align:center; opacity:.85; font-size:14px }
    /* konfeti */
    .confetti{ position:fixed; inset:0; pointer-events:none; overflow:hidden }
    .piece{ position:absolute; width:10px; height:14px; opacity:0; transform: translateY(-20vh) rotate(0);
      animation: fall 2600ms ease-in forwards; }
    @keyframes fall{
      0%{opacity:0; transform: translateY(-20vh) rotate(0deg)}
      8%{opacity:1}
      100%{opacity:1; transform: translateY(110vh) rotate(720deg)}
    }
    .error{
      position:fixed; left:50%; top:16px; transform:translateX(-50%);
      background:#fff; color:#6b0000; padding:10px 14px; border-radius:10px; font-weight:700;
      box-shadow:0 8px 24px rgba(0,0,0,.3); display:none;
    }
    /* mÃ¼zik toggle */
    #audioToggle{
      position:fixed; right:14px; bottom:14px; z-index:1000;
      background:rgba(246,242,233,.95); color:#7a0000; border-radius:999px;
      padding:10px 14px; font-weight:700; box-shadow:0 10px 22px rgba(0,0,0,.25);
      cursor:pointer; user-select:none;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card" id="card">
      <div class="envelope" id="envelope" role="button" aria-label="Davetiyeyi aÃ§">
        <div class="seal">ðŸ‡¹ðŸ‡·</div>
        <div class="hint">TÄ±kla / dokun: Davetiye aÃ§Ä±lsÄ±n</div>
      </div>
      <div class="paper" id="paper" aria-hidden="true">
        <!-- GÃ–RSEL KÃ–KTE: invitation.jpg -->
        <img id="inviteImage" src="invitation.jpg?v=3" alt="Cumhuriyet Balosu 2025 Davetiyesi" />
      </div>
    </div>
    <div class="actions"><button id="openBtn">Davetiyeyi AÃ§</button></div>
    <p class="footer">17.30 AkÅŸam YemeÄŸi â€“ BahÃ§e â€¢ 18.00â€“19.00 FotoÄŸraf â€“ MÃ¼ze â€¢ 19.00â€“22.50 Balo â€“ Yemekhane â€¢ 23.00 Yatakhane GiriÅŸi</p>
  </div>

  <!-- MÃ¼zik (kÃ¶kte music.mp3 varsa otomatik baÄŸlanÄ±r) -->
  <audio id="bgm" src="music.mp3" preload="auto" loop></audio>
  <div id="audioToggle">ðŸ”ˆ MÃ¼zik: KapalÄ±</div>

  <div class="confetti" id="confetti"></div>
  <div class="error" id="err">GÃ¶rsel yÃ¼klenemedi: invitation.jpg</div>

  <script>
    const card = document.getElementById('card');
    const openBtn = document.getElementById('openBtn');
    const envelope = document.getElementById('envelope');
    const confetti = document.getElementById('confetti');
    const img = document.getElementById('inviteImage');
    const err = document.getElementById('err');
    const bgm = document.getElementById('bgm');
    const audioToggle = document.getElementById('audioToggle');

    // gÃ¶rsel yÃ¼klenemezse uyarÄ±
    img.addEventListener('error', () => { err.style.display = 'block'; });

    // davetiye aÃ§Ä±lÄ±ÅŸÄ± + konfeti + mÃ¼zik
    async function openInvite(){
      card.classList.add('open');
      try { 
        if (bgm && bgm.src) {
          await bgm.play();
          audioToggle.textContent = "ðŸ”Š MÃ¼zik: AÃ§Ä±k";
        }
      } catch(e){}
      confettiBurst();
      // 10 sn sonra konfetiyi durdur (opsiyonel)
      setTimeout(()=> confetti.innerHTML = "", 10000);
    }

    openBtn.addEventListener('click', openInvite);
    envelope.addEventListener('click', openInvite);

    // mÃ¼zik toggle
    audioToggle.addEventListener('click', async () => {
      if (!bgm || !bgm.src) return; // music.mp3 yoksa sessizce Ã§Ä±k
      if (bgm.paused) {
        try { await bgm.play(); audioToggle.textContent = "ðŸ”Š MÃ¼zik: AÃ§Ä±k"; } catch(e){}
      } else {
        bgm.pause(); audioToggle.textContent = "ðŸ”ˆ MÃ¼zik: KapalÄ±";
      }
    });

    // konfeti Ã¼retici
    function confettiBurst(){
      confetti.innerHTML = "";
      const colors = ['#f6f2e9','#ffe5c7','#ffd8b0','#ffffff','#ffb48a'];
      const reds = ['#8e0000','#a00000','#c10000','#6e0000'];
      for(let i=0;i<150;i++){
        const piece = document.createElement('div');
        piece.className = 'piece';
        const size = Math.random()*8+6;
        piece.style.left = Math.random()*100+'vw';
        piece.style.width = size+'px';
        piece.style.height = size*1.4+'px';
        piece.style.background = Math.random()>.45
          ? colors[Math.floor(Math.random()*colors.length)]
          : reds[Math.floor(Math.random()*reds.length)];
        piece.style.animationDelay = Math.random()*400+'ms';
        confetti.appendChild(piece);
      }
    }
  </script>
</body>
</html>
